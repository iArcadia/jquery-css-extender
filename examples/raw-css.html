<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>

    <title>jQuery CSS Extender - rawCss</title>

    <!-- Code Mirror CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/codemirror.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/theme/zenburn.min.css"/>

    <!-- jQuery 3.3.1 -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
    <!-- jQuery CSS Extender -->
    <script src="../src/jquery-css-extender.js"></script>
    <!-- Code Mirror JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/mode/javascript/javascript.min.js"></script>

    <script>
        $(document).ready(function () {
            // Variable declarations
            let $container = $('#container'),
                $block = $('#block'),
                $blockHeader = $('#block-header'),
                $title = $('h1'),
                $subtitle = $('h2'),
                $content = $('#content');

            let $languageBlock = $('#language-block'),
                $selectLanguage = $('#select-language');

            // CSS <body>
            $('body').css(`margin: 0`);

            // CSS #container
            $container.css(`
                width: 100%;
                height: 100vh;
                background: linear-gradient(#ededed, #eee, #eaeaea);
            `);

            // CSS #block
            $block.css(`
                position: fixed;
                top: 50%;
                left: 50%;

                width: 80%;
                height: 80%;

                background-color: #fff;
                border-radius: 3px;
                box-shadow: 0 0 20px rgba(0,0,0,.25);

                transform: translate(-50%, -50%);
            `);

            // CSS #block-header
            $blockHeader.css(`
                padding: 2em 4em .5em 4em;

                background-color: #21a2ed;
                border-radius: 3px 3px 0 0;
            `);

            // CSS <h1> and <h2>
            $('h1, h2').css(`font-family: sans-serif`);

            // CSS <h1>
            $title.css(`
                margin: 0;

                font-size: 40px;
                text-align: center;
                text-shadow: 0 0 5px rgba(0,0,0,.1);
                text-fill-color: transparent;

                background: linear-gradient(rgba(255,255,255,.75), 44%, #fff 46%, #fff 50%, rgba(255,255,255,.75) 66%);
                -webkit-background-clip: text;
            `);

            // CSS <h2>
            $subtitle.css(`
                padding: 10px 0;

                color: #c9f0f2;
                text-align: center;
                text-shadow: 0 0 5px rgba(0,0,0,.5);
            `);

            // CSS <span> in <h2>
            $subtitle.find('span:last-of-type').css(`
                color: #fff;
            `);

            // CSS #content
            $content.css(`
                padding: 0 4em 2em 4em;
            `);

            // CSS <p> in #content
            $content.find('p').css(`
                font-size: 20px;
                text-align: center;
            `);

            // CSS <small> in <p> in #content
            $content.find('p > small').css(`
                font-size: 12px;
                font-style: italic;
            `);

            // <hidden>
            // Not to show in Code Mirror container.
            let $code = $('#code');

            $code.text($('script').last().text().trim()
                .replace(/ {8}/g, '')
                .replace(/\s*\/{2} <hidden>.+?<\/hidden>/gs, ''));

            CodeMirror.fromTextArea($code[0], {
                mode: 'javascript',
                theme: 'zenburn',
                lineNumbers: true,
                readOnly: true
            });

            let $cm = $code.next();
            let $cmHead = $('<div>').addClass('CodeMirror-header').insertBefore($cm).css(`
                padding: 5px 10px;

                font-family: monospace;

                border-bottom: 1px solid #fff;
            `).copyCss($cm, ['background-color', 'color']).text('JS Code of this page');

            $cm.css(`
                width: 100%;
                height: calc(400px - ${$cmHead.outerHeight()}px);
            `);
            // </hidden>

            // CSS #language-block
            $languageBlock.css(`
                position: fixed;
                top: 10px;
                right: 10px;

                padding: 10px 20px;

                background-color: #fff;
            `);

            // CSS #select-language
            $selectLanguage.css(`
                border-radius: 3px;
            `);

            // <hidden>
            // Not to show in Code Mirror container.
            let translations = {
                '0': {
                    en: 'Example:',
                    fr: 'Exemple:'
                },

                '1': {
                    en: 'using raw CSS in .css()',
                    fr: 'utilisation de CSS pur dans .css()'
                },

                '2': {
                    en: "All this page is style with the plugin. No CSS file included",
                    fr: "Toute cette page a été stylisée avec le plugin. Aucun fichier CSS inclus."
                },

                '3': {
                    en: "Okay, not exactly, but it's just for the below textarea...",
                    fr: "Ok, pas tout à fait, mais c'est juste pour le textarea ci-dessous..."
                },
            };

            $selectLanguage.on('change', function () {
                let language = $(this).find('option:selected').val();

                $('[data-trans]').each(function (i) {
                    if (typeof translations[String(i)] !== 'undefined' && typeof translations[String(i)][language] !== 'undefined') {
                        $(this).text(translations[String(i)][language]);
                    }
                });
            });

            $selectLanguage.find(`option[value="${navigator.language.substring(0, 2)}"]`).prop('selected', true);
            $selectLanguage.change();
            // </hidden>
        });
    </script>
</head>
<body>
<div id="container">
    <div id="block">
        <div id="block-header">
            <h1>jQuery CSS Extender</h1>

            <h2><span data-trans="0">Example:</span> <span data-trans="1">using raw CSS in .css()</span></h2>
        </div>

        <div id="content">
            <p data-trans="2">All this page is styled with the plugin. No CSS file included.</p>
            <p>
                <small data-trans="3">Okay, not exactly, but it's just for the below textarea...</small>
            </p>

            <textarea id="code"></textarea>
        </div>
    </div>
</div>

<div id="language-block">
    <select id="select-language">
        <option value="en">English</option>
        <option value="fr">Français</option>
    </select>
</div>
</body>
</html>