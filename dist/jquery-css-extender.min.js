(function(a){let b=a.fn.css;a.fn.css=function(){if(!arguments.length||null===arguments[0])return this.getComputedCss();let a=[1<arguments.length,"object"==typeof arguments[0],"string"==typeof arguments[0]&&-1===arguments[0].indexOf(":")],c=["string"==typeof arguments[0]&&"string"==typeof arguments[1],"object"==typeof arguments[0]],d=!1,e={};for(let a in c)if(c[a]){switch(parseInt(a)){case 0:e[arguments[0]]=arguments[1];break;case 1:e=arguments[0];}d=!0;break}for(let c in a)if(a[c])return b.apply(this,arguments),d&&this.cssHistory(e),this;return this.rawCss(arguments[0])},a.fn.rawCss=function(a){if("string"!=typeof a)throw new TypeError(`The first argument of jQuery.fn.rawCss must be a string. ${typeof a} given.`);let b=/\{.*\}/s.test(a);if(b)return this.rawCssBlock(a);let c={},d=a.trim().split(";");for(let b=0;b<d.length;b++)if(line=d[b].trim(),line){let a=/([a-z-]+)\s*:\s*(.+)/.exec(line);c[a[1]]=a[2]}return this.css(c)},a.fn.rawCssBlock=function(a){let b=a.trim().split("}");for(let c in b)if(block=b[c],block){let a=`[]wd-`.split("").map(function(a){return`\\${a}`}),b=`#.<>:()+*,~|$^="' `.split("").concat(a).join(""),c=new RegExp(`([${b}]+)\{(.*)`,"s").exec(block),d=c[1],e=c[2],f=0===d.indexOf(":this");f?this.css(e.replace(/:this/,"")):this.find(d).css(e)}return this},a.fn.getComputedCss=function(a=null){if("string"==typeof a&&(a=[a]),null!==a&&!Array.isArray(a))throw new TypeError(`The first argument of jQuery.fn.getComputedCss must be a string, an array or null. ${typeof a} given.`);let b=window.getComputedStyle(this[0],null),c={};for(let d,e=0;e<b.length;e++)d=b[e],null===a?c[d]=b.getPropertyValue(d):a.includes(d)&&(c[d]=b.getPropertyValue(d));return c},a.fn.getDifferencesFromDefaultCss=function(){let a=this.getComputedCss(),b=this.clone().useCssHistorySystem(!1).appendTo("body"),c=b.resetCss().getComputedCss(),d={};if(a===c)return b.remove(),d;for(let b in a)a[b]!==c[b]&&(d[b]=a[b]);return b.remove(),d},a.fn.copyCss=function(a,b=null){if(!(a instanceof jQuery))throw new TypeError(`The first argument of jQuery.fn.copyCss must be a jQuery object. ${typeof a} given.`);return this.data("__cssCopiedFromObject",a),this.css(a.getComputedCss(b)),this},a.fn.copyCssTo=function(a,b=null){return a.copyCss(this,b),this},a.fn.takeCss=function(a,b=null){if(!(a instanceof jQuery))throw new TypeError(`The first argument of jQuery.fn.takeCss must be a jQuery object. ${typeof a} given.`);return this.data("__cssTakenFromObject",a),this.css(a.getComputedCss(b)),a.resetCss(b),this},a.fn.giveCssTo=function(a,b=null){return a.takeCss(this,b),this},a.fn.resetCss=function(a=null){let b=this.getComputedCss(a);for(let c in this.data("__cssFromReset",!0),b)b[c]="";return this.css(b),this},a.fn.resetCssWithoutHistory=function(a=null){return this.useCssHistorySystem(!1).resetCss(a).useCssHistorySystem(!0)},a.fn.useCssHistorySystem=function(a){if("string"==typeof a&&(a="true"==a),"number"==typeof a&&(a=0<a),"boolean"!=typeof a)throw new TypeError(`The first argument of jQuery.fn.useCssHistory must be a boolean. ${typeof a} given.`);return this.data("__cssUseHistorySystem",a),this},a.fn.cssHistory=function(a=null){if(null!==a&&"object"!=typeof a)throw new TypeError(`The first argument of jQuery.fn.cssHistory must be an object. ${typeof a} given.`);if("undefined"==typeof this.data("__cssHistory")&&this.data("__cssHistory",[]),"undefined"==typeof this.data("__cssUseHistorySystem")&&this.data("__cssUseHistorySystem",!0),!arguments.length||null===a)return this.data("__cssHistory");else{if(!1===this.data("__cssUseHistorySystem"))return this;let b=this.data("__cssHistory");return b.push({changedRulesFromLast:a,allChangedRuled:this.getDifferencesFromDefaultCss(),allRules:this.getComputedCss(),takenFromObject:this.data("__cssTakenFromObject")||null,copiedFromObject:this.data("__cssCopiedFromObject")||null,takenFromHistory:this.data("__cssCopiedFromHistory")||null,fromReset:this.data("__cssFromReset")||null}),this.removeData(["__cssTakenFromObject","__cssCopiedFromObject","__cssCopiedFromHistory","__cssFromReset"]),this.data("__cssHistory",b)}},a.fn.useCssFromHistory=function(a,b=null){if("string"==typeof b&&(b=[b]),null!==b&&!Array.isArray(b))throw new TypeError(`The second argument of jQuery.fn.useCssFromHistory must be a string, an array or null. ${typeof b} given.`);let c=this.cssHistory()[a].changedRulesFromLast;if(null!==b)for(let a in c)b.includes(a)||delete c[a];return this.data("__cssCurrentHistoryId",a),this.data("__cssCopiedFromHistory",this.cssHistory()[a]),this.resetCssWithoutHistory().css(c)},a.fn.usePreviousCss=function(a=null){let b=this.data("__cssCurrentHistoryId")||this.cssHistory().length-1;return this.data("__cssCurrentHistoryId",b--),this.useCssFromHistory(b,a)},a.fn.emptyCssHistory=function(){return this.data("__cssHistory")},a.fn.cssState=function(a=null,b=null){if(null!==a&&("number"==typeof a&&(a+=""),"string"!=typeof a))throw new TypeError(`The first argument of jQuery.fn.cssState must be an string. ${typeof a} given.`);if(null!==b&&"object"!=typeof b)throw new TypeError(`The second argument of jQuery.fn.cssState must be an object. ${typeof b} given.`);if("undefined"==typeof this.data("__cssState")&&this.data("__cssState",{}),!arguments.length)return this.data("__cssState");if(1===arguments.length){for(let a in this.data("__cssState"))if("object"==typeof this.data("__cssState")[a])return this.data("__cssState")[a];}else{let c=this.data("__cssState");return c[a]=b,this.data("__cssState",c)}}})(jQuery);